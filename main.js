!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=".profile__image",s=document.querySelector("#add-card-form"),r=document.querySelector("#edit-profile-form"),i=r.querySelector(".modal__input_type_name"),o=r.querySelector(".modal__input_type_descripion"),n=document.querySelector("#change-image-form"),a=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button"),d=document.querySelector(".profile__image-button");class h{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__exit-button"))&&this.close()}))}}var c=class{constructor(e){let{userName:t,userJob:s,profileImage:r}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s),this._profileImage=document.querySelector(r)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setProfileInfo(e){let{profileName:t,profileJob:s}=e;this._profileName.textContent=t,this._profileJob.textContent=s}setProfileImage(e){let{avatar:t}=e;this._profileImage.src=t,this._profileImage.alt="Profile-image-here"}};class u extends h{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super(t),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=s,this._submitButton=this._popupElement.querySelector(".modal__save-button"),this._submitButtonText=this._submitButton.textContent,this._inputList=this._popupForm.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){super.close(),this._popupForm.reset()}renderSaving(e){this._submitButton.textContent=e?"Saving...":this._submitButtonText}}var _=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this.checkInputValidity(e),this.toggleButtonState()}))}))}checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent="",this._errorMessageEl.classList.remove(this._errorClass)}toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}resetValidation(){this.toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}};const m=new class{constructor(e){let{baseUrl:t,authToken:s}=e;var r,i,o;r=this,o=e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`),(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i="_processServerResponse"))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,this._baseUrl=t,this._authToken=s,this._headers={authorization:this._authToken,"Content-Type":"application/json"}}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._processServerResponse)}loadUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._processServerResponse)}editUserInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.title,about:e.description})}).then(this._processServerResponse)}addCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.title,link:e.link})}).then(this._processServerResponse)}removeCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._processServerResponse)}removeCardLike(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._processServerResponse)}addCardLike(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._processServerResponse)}updateProfilePic(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then(this._processServerResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",authToken:"eb433773-4d2e-4e42-9076-4dd771b1e5ef"});let p,g;const v=new c({userName:".profile__title",userJob:".profile__description",profileImage:t});Promise.all([m.loadUserInfo(),m.getInitialCards()]).then((e=>{let[t,s]=e;v.setProfileInfo({profileName:t.name,profileJob:t.about}),v.setProfileImage(t),g=t._id,p=new class{constructor(e,t){let{items:s,renderer:r}=e;this._renderedItems=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._renderedItems.forEach(this._renderer)}addItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}}({items:s,renderer:e=>{const t=S(e);p.addItem(t)}},".cards__list"),p.renderItems()})).catch((e=>console.log(e)));const b=new class extends h{constructor(e){super(e),this._modalImage=this._popupElement.querySelector(".modal__image"),this._modalText=this._popupElement.querySelector(".modal__caption")}open(e){this._modalImage.src=e.link,this._modalImage.alt=`Image ${e.link}`,this._modalText.textContent=e.name,super.open()}}("#image-modal"),f=new class extends h{constructor(e){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._deleteSubmitButton=this._popupElement.querySelector(".modal__delete-card-button"),this._deleteSubmitButtonText=this._deleteSubmitButton.textContent}setSubmit(e){this._handleSubmitCallback=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmitCallback()}))}renderSavingText(e){this._deleteSubmitButton.textContent=e?"Deleting...":this._deleteSubmitButtonText}}("#delete-modal"),S=e=>{const t=new class{constructor(e,t,s){let{data:r,toggleImageClick:i,toggleCardDelete:o,toggleCardLike:n}=e;var a,l,d;a=this,d=()=>{this._cardElement.remove(),this._cardElement=null},(l=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(l="deleteCard"))in a?Object.defineProperty(a,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[l]=d,this._name=r.name,this._link=r.link,this._id=r._id,this._likes=r.likes,this._userId=s,this._ownerId=r.owner._id,this._toggleImageClick=i,this._toggleCardDelete=o,this._toggleCardLike=n,this._cardSelector=t}getId(){return this._id}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._imageEl.src=this._link,this._imageEl.alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardTally=this._cardElement.querySelector(".card__like-tally"),this._renderLikes(),this._ownerId!==this._userId&&this._cardDeleteBtn.remove(),this._cardElement}isLiked(){return this._likes.some((e=>this._userId===e._id))}updateLikes(e){this._likes=e,this._renderLikes()}_renderLikes(){this.isLiked()?this._cardLikeBtn.classList.add("card__like-button_active"):this._cardLikeBtn.classList.remove("card__like-button_active"),this._cardTally.textContent=this._likes.length}_setEventListeners(){this._cardLikeBtn=this._cardElement.querySelector(".card__like-button"),this._cardLikeBtn.addEventListener("click",(()=>this._toggleCardLike())),this._cardDeleteBtn=this._cardElement.querySelector(".card__delete-button"),this._cardDeleteBtn.addEventListener("click",(()=>this._toggleCardDelete())),this._imageEl=this._cardElement.querySelector(".card__image"),this._imageEl.addEventListener("click",(()=>this._toggleImageClick({name:this._name,link:this._link})))}}({data:e,toggleImageClick:e=>{b.open(e)},toggleCardDelete:()=>{const e=t.getId();f.open(),f.setSubmit((()=>{f.renderSavingText(!0),m.removeCard(e).then((()=>{t.deleteCard(),f.close()})).catch((e=>console.log(e))).finally((()=>{f.renderSavingText(!1)}))}))},toggleCardLike:()=>{const e=t.getId();t.isLiked()?m.removeCardLike(e).then((e=>{t.updateLikes(e.likes)})).catch((e=>console.log(e))):m.addCardLike(e).then((e=>{t.updateLikes(e.likes)})).catch((e=>console.log(e)))}},"#card-template",g);return t.getView()},E=new u({popupSelector:"#edit-modal",handleFormSubmit:e=>{E.renderSaving(!0),m.editUserInfo(e).then((()=>{v.setProfileInfo({profileName:e.title,profileJob:e.description}),E.close()})).catch((e=>console.log(e))).finally((()=>{E.renderSaving(!1)}))}}),y=new c({profileImage:t}),k=new u({popupSelector:"#profile-modal",handleFormSubmit:e=>{k.renderSaving(!0),m.updateProfilePic(e).then((()=>{y.setProfileImage({avatar:e.link}),k.close()})).catch((e=>console.log(e))).finally((()=>{k.renderSaving(!1)}))}}),L=new u({popupSelector:"#add-modal",handleFormSubmit:e=>{L.renderSaving(!0),m.addCard(e).then((e=>{!function(e){const t=S(e);p.prependItem(t)}(e),L.close()})).catch((e=>console.log(e))).finally((()=>{L.renderSaving(!1)}))}}),C=new _(e,r),I=new _(e,s),B=new _(e,n);b.setEventListeners(),f.setEventListeners(),E.setEventListeners(),L.setEventListeners(),k.setEventListeners(),C.enableValidation(),I.enableValidation(),B.enableValidation(),a.addEventListener("click",(()=>{!function(){const{name:e,job:t}=v.getUserInfo();i.value=e,o.value=t}(),E.open(),C.resetValidation()})),l.addEventListener("click",(()=>{L.open(),I.resetValidation()})),d.addEventListener("click",(()=>{k.open(),B.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NkssRUFBd0I3SyxvQkFFeEJrTCxFQUFrQnJJLG1CQUNsQnVJLEVBQWlCdkksbUJBQ2pCd0ksRUFBcUJ4SSxtQkFPckJoRSxFQUFrQmdCLGlCQUFpQixTQUFTLE1BOUc1QyxXQUNFLE1BQU0sS0FBRWEsRUFBSSxJQUFFRSxHQUFRd0YsRUFBUzNGLGNBQy9CL0IsRUFBa0J1RCxNQUFRdkIsRUFDMUIvQixFQUF3QnNELE1BQVFyQixDQUNsQyxDQTJHRTBLLEdBQ0FWLEVBQWlCbEwsT0FDakJ3TCxFQUFrQnJILGlCQUFpQixJQUdyQy9FLEVBQWNlLGlCQUFpQixTQUFTLEtBQ3RDaUwsRUFBYXBMLE9BQ2IwTCxFQUFpQnZILGlCQUFpQixJQUdwQzlFLEVBQXlCYyxpQkFBaUIsU0FBUyxLQUNqRGdMLEVBQXdCbkwsT0FDeEIyTCxFQUFxQnhILGlCQUFpQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvQXBpLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBGb3JtVmFsaWRhdGlvblxyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbi8vIENhbGxpbmcgbmV3IGNsYXNzZXNcclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBjYXJkTGlzdDogXCIuY2FyZHNfX2xpc3RcIixcclxuICBjYXJkVGVtcGxhdGU6IFwiLmNhcmRfX3RlbXBsYXRlXCIsXHJcbiAgdmlld01vZGFsOiBcIiNpbWFnZS1tb2RhbFwiLCAvLyBcIi5cIiBpbiBQb3B1cC5qc1xyXG4gIHVzZXJOYW1lOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIHVzZXJKb2I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbiAgcHJvZmlsZUltYWdlOiBcIi5wcm9maWxlX19pbWFnZVwiLFxyXG4gIGFkZE1vZGFsOiBcIiNhZGQtbW9kYWxcIixcclxuICBlZGl0TW9kYWw6IFwiI2VkaXQtbW9kYWxcIixcclxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICBwcm9maWxlSW1hZ2VNb2RhbDogXCIjcHJvZmlsZS1tb2RhbFwiLFxyXG4gIGRlbGV0ZUNhcmRNb2RhbDogXCIjZGVsZXRlLW1vZGFsXCIsXHJcbn07XHJcblxyXG4vKiBJbnB1dCBmaWVsZHMgaW4gRWRpdCBidXR0b24gKi9cclxuZXhwb3J0IGNvbnN0IGNhcmRBZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtZm9ybVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IHByb2ZpbGVFZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX25hbWVcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBwcm9maWxlRWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV9kZXNjcmlwaW9uXCJcclxuKTtcclxuLypJbnB1dCBmaWVsZCBvbiBwcm9maWxlIGltYWdlICovXHJcbmV4cG9ydCBjb25zdCBjaGFuZ2VJbWFnZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NoYW5nZS1pbWFnZS1mb3JtXCIpO1xyXG4vLyBCdXR0b25zXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGNoYW5nZVByb2ZpbGVJbWFnZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9faW1hZ2UtYnV0dG9uXCJcclxuKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIC8vIHRoaXMuX3BvcHVwRWxlbWVudCA9IG1vZGFsXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpOyAvLyAoLmJpbmQodGhpcykpIG5lZWRlZCB0byBub3QgbG9zZWUgbG9zZSBjb250ZXh0ICd0aGlzJ1xyXG4gIH1cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAvKiBDbG9zZXMgcG9wdXAgd2hlbiAnRXNjJyBrZXkgcHJlc3NlZCAqL1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgLy8gTWV0aG9kIGNhbGxlZCA9IGFkZGluZyBjbGFzcyBhbmQgZXZlbnRMaXN0ZW5lclxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgLy8gTWV0aG9kIGNhbGxlZCA9IHJlbW92aW5nIGNsYXNzIGFuZCBldmVudExpc3RlbmVyXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIC8vV2hlbiB0aGUgRXNjYXBlIGtleSBpcyBwcmVzc2VkIGNsb3NlTW9kYWxcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvKiBDbG9zZSBNb2RhbCB3aGVuIHlvdSBjbGljazogb24gc2hhZGVkIGFyZWEgb2YgZm9ybVxyXG4gICAgICAgb3IgY2xvc2UgaWNvbiBvZiBNb2RhbCAqL1xyXG4gICAgLy8gTW91c2Vkb3duID0gT25sdCB3aGVuIHlvdSBjbGljayBvbiBhcmVhcyB0aGF0IGNhbiBjbG9zZVxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19leGl0LWJ1dHRvblwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCIvLyBSZW5kZXJzIGluZm8gZmllbGRzIGluIHByb2ZpbGUtaWNvbiAoRWRpdC1CdXR0b24pXHJcbmNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lLCB1c2VySm9iLCBwcm9maWxlSW1hZ2UgfSkge1xyXG4gICAgLy8gR3JhYnMgb2JqZWN0IG9mIHVzZXIgaW5mb1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2IpO1xyXG4gICAgLy9PYmplY3Qgb2YgcHJvZmlsZSBpbWFnZVxyXG4gICAgdGhpcy5fcHJvZmlsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSW1hZ2UpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSB1c2VyXHJcbiAgICAvLyBIYW5keSB3aGVuIE5FQ0VTU0FSWSB0byBkaXNwbGF5IHRoZSB1c2VyIGRhdGEgaW4gdGhlIG9wZW4gZm9ybVxyXG4gIH1cclxuICBzZXRQcm9maWxlSW5mbyh7IHByb2ZpbGVOYW1lLCBwcm9maWxlSm9iIH0pIHtcclxuICAgIC8vIFRha2VzIG5ldyB1c2VyIGRhdGEgYW5kIGFkZHMgaXQgb24gdGhlIHBhZ2VcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gcHJvZmlsZU5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gcHJvZmlsZUpvYjtcclxuICB9XHJcbiAgc2V0UHJvZmlsZUltYWdlKHsgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVJbWFnZS5zcmMgPSBhdmF0YXI7IC8vIGltYWdlIGVxdWFsIHRvIGF2YXRhciBmcm9tIGFwaVxyXG4gICAgdGhpcy5fcHJvZmlsZUltYWdlLmFsdCA9IFwiUHJvZmlsZS1pbWFnZS1oZXJlXCI7IC8vIGFsdCBlcXVhbCB0byBhcGkgdGV4dGNvbnRlbnRcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbi8qIFNlbGVjdHMgZmllbGRzIGluIGFkZC1pY29uIFxyXG4gICBhbmQgZWRpdC1pY29uICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3NhdmUtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICAgIC8vIGlucHV0TGlzdCBhY2Nlc3NlcyBhbGwgaW5wdXQgZmllbGRzXHJcbiAgICAvKiBoYW5kbGVGb3JtU3VibWl0ID0gY2FsbGJhY2sgdGhhdCBQb3B1cFdpdGhGb3JtIFxyXG4gICAgICAgICAgIGNhbGxzIHdoZW4gdGhlIGZvcm1zIHN1Ym1pdCBldmVudCBmaXJlcyAqL1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgICAvKiBDb2xsZWN0cyBkYXRhIGZyb20gYWxsIHRoZSBpbnB1dCBmaWVsZHMgXHJcbiAgICAgICBhbmQgcmV0dXJucyB0aGF0IGRhdGEgYXMgYW4gb2JqZWN0ICovXHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIC8vIENhbGwgZnVuY3Rpb24gaW4gZnVuY3Rpb25cclxuICAgIH0pO1xyXG4gICAgLyogIEFkZCB0aGUgc3VibWl0IGV2ZW50IGhhbmRsZXIgdG8gdGhlIGZvcm0gXHJcbiAgICAgICAgYW5kIHRoZSBjbGljayBldmVudCBsaXN0ZW5lciB0byB0aGUgY2xvc2UgaWNvbiovXHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgLy8gUmVzZXRzIHRoZSBmb3JtIG9uY2UgdGhlIHBvcHVwIGlzIGNsb3NlZFxyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlcyBzYXZlLWJ1dHRvbiB0ZXh0IHdoZW4gc2F2aW5nXHJcbiAgcmVuZGVyU2F2aW5nKGlzU2F2aW5nKSB7XHJcbiAgICBpZiAoaXNTYXZpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgLy8gUHJpdmF0ZVxyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAvLyBHcmFicyBmb3JtRWxlbWVudFxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIC8vIENhbGwgb24gdGhlIG1ldGhvZCAoc2V0RXZlbnRMaXN0ZW5lcnMpIHdpdGhpbiB0aGUgY2xhc3NcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIC8vIENoZWNrIGZvciBzdWJtaXQsIGlucHV0IGZpZWxkcywgYW5kIChjb25zdHJ1Y3RvcilcclxuICAgICAgICAvKiBPdGhlciBwYXJhbWV0ZXJzIGFyZW4ndCBjYWxsZWQgYmMgXHJcbiAgICAgICAgICAgdGhleSBjYW4gYmUgcmVmZXJyZWQgdG8gYXMgJ3RoaXMnICovXHJcbiAgICAgICAgLy8gQm90aCBtZXRob2RzIGFyZSBwdWJsaWMgKGNhbiBiZSB1c2VkIGluIG90aGVyIGpzIGZpbGVzKVxyXG4gICAgICAgIHRoaXMuY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgLy8gUGFzcyBpbiBpbnB1dCBmaWVsZHMsIHNhdmUtYnV0dG9uLCBhbmQgY29uc3RydWN0b3JzXHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gUGFydCAxIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIC8vIGlmIGlucHV0IGVsZW1lbnQgaXMgbm90IHZhbGlkXHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIC8vIEVycm9yIG1lc3NhZ2UgcmVmZXJyZWQgdG8gYXMgJ3RoaXMnXHJcbiAgICAvLyAnSWQnIGluIGlucHV0IG11c3QgYmUgc29tZXdoYXQgc2ltaWxhciB0byBzcGFuXHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTsgLy9kaWZmZXJcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFBhcnQgMiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENMZWFycyBlcnJvcnMgYW5kIGNvbnRyb2xscyBzdWJtaXQgYnV0dG9uXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIC8vIENoZWNrcyBhbGwgXCJtb2RhbF9faW5wdXRcIiBmb3IgdmFsaWRpdHlcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICAvKiBEb24ndCBuZWVkIHRvIGhhdmUgaW5wdXRFbGVtZW50IGluIHBhcmFtZXRlclxyXG4gICAgICAgYmVjYXVzZSBhbHJlYWR5IHJlZmVycmVkIHRvIGluIF9zZXRFdmVudExpc3RlbmVycz8gKi9cclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICAvLyBzdWJtaXRCdXR0b24gaXMgd2l0aGluIF9zZXRFdmVudExpc3RlbmVyc1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBDYWxsZWQgaW4gaW5kZXguanNcclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7XHJcbiAgc2VsZWN0b3JzLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIGVkaXRQcm9maWxlQnV0dG9uLFxyXG4gIGFkZENhcmRCdXR0b24sXHJcbiAgY2hhbmdlUHJvZmlsZUltYWdlQnV0dG9uLFxyXG4gIHNldHRpbmdzLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybSxcclxuICBjYXJkQWRkRm9ybSxcclxuICBjaGFuZ2VJbWFnZUZvcm0sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzXCI7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGUgaW5zdGFuY2VzIG9mIGNsYXNzZXMgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLSBQcmV2aW91cyBFZGl0LUJ1dHRvbiBEYXRhIEFQSSArIENhcmQgQVBJIC0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gIGF1dGhUb2tlbjogXCJlYjQzMzc3My00ZDJlLTRlNDItOTA3Ni00ZGQ3NzFiMWU1ZWZcIixcclxufSk7XHJcblxyXG5sZXQgY2FyZFNlY3Rpb247XHJcbmxldCB1c2VySWQ7XHJcblxyXG4vLyBNYW5hZ2UgcHJvZmlsZSBmaWVsZCBkYXRhIGluIGVkaXQtYnV0dG9uXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZTogc2VsZWN0b3JzLnVzZXJOYW1lLFxyXG4gIHVzZXJKb2I6IHNlbGVjdG9ycy51c2VySm9iLFxyXG4gIHByb2ZpbGVJbWFnZTogc2VsZWN0b3JzLnByb2ZpbGVJbWFnZSxcclxufSk7XHJcblxyXG4vKiBPbmNlIFByb21pc2VzIHJlc29sdmVkLCBleGVjdXRlOiBcclxuICAgTG9hZFVzZXJJbmZvID0gbG9hZCB1cGRhdGVkIGlucHV0IGZpZWxkIGRhdGEgZnJvbSBzZXJ2ZXJcclxuICAgVXNlcmRhdGEgPSBhcnJheSBvZiB1c2VyIGluZm9cclxuICAgZ2V0SW5pdGlhbENhcmRzID0gZ2V0IGNhcmRzIGZyb20gc2VydmVyXHJcbiAgIGluaXRpYWxDYXJkRGF0YSA9IGFycmF5IG9mIGNhcmQgZGF0YSAqL1xyXG5Qcm9taXNlLmFsbChbYXBpLmxvYWRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGluaXRpYWxDYXJkRGF0YV0pID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFByb2ZpbGVJbmZvKHtcclxuICAgICAgcHJvZmlsZU5hbWU6IHVzZXJEYXRhLm5hbWUsXHJcbiAgICAgIHByb2ZpbGVKb2I6IHVzZXJEYXRhLmFib3V0LFxyXG4gICAgfSk7XHJcbiAgICB1c2VySW5mby5zZXRQcm9maWxlSW1hZ2UodXNlckRhdGEpO1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkOyAvLyBzZXQgdXNlciBpZFxyXG4gICAgLy8gSW5pdGlhdGluZyBSZW5kZXIgQ2FyZCB3aXRoIFNlY3Rpb24gKGNhcmRzIGZyb20gU2VydmVyKSwgc3RcclxuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogaW5pdGlhbENhcmREYXRhLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGRhdGEpOyAvLyBNYWtlIGNhcmQgYW5kIGltYWdlLW1vZGFsXHJcbiAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTsgLy8gQWRkIGluaXRpYWxDYXJkc1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHNlbGVjdG9ycy5jYXJkTGlzdFxyXG4gICAgKTtcclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7IC8vIENhbGwgb24gbWV0aG9kIHRvIGJ1aWxkL3JlbmRlciBjYXJkc1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG5cclxuLy8gSGlkZGVuIEltYWdlIE1vZGFsIFdpbmRvd1xyXG5jb25zdCB2aWV3Q2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy52aWV3TW9kYWwpO1xyXG5jb25zdCBkZWxldGVDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoQ29uZmlybShzZWxlY3RvcnMuZGVsZXRlQ2FyZE1vZGFsKTtcclxuXHJcbi8vIENyZWF0ZXMgY2FyZCBhbmQgaW1hZ2UtbW9kYWxcclxuY29uc3QgY3JlYXRlQ2FyZCA9IChvYmplY3REYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBkYXRhOiBvYmplY3REYXRhLFxyXG4gICAgICB0b2dnbGVJbWFnZUNsaWNrOiAoaW1nRGF0YSkgPT4ge1xyXG4gICAgICAgIHZpZXdDYXJkTW9kYWwub3BlbihpbWdEYXRhKTtcclxuICAgICAgfSxcclxuICAgICAgdG9nZ2xlQ2FyZERlbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRJZCA9IGNhcmQuZ2V0SWQoKTtcclxuICAgICAgICBkZWxldGVDYXJkTW9kYWwub3BlbigpO1xyXG4gICAgICAgIGRlbGV0ZUNhcmRNb2RhbC5zZXRTdWJtaXQoKCkgPT4ge1xyXG4gICAgICAgICAgZGVsZXRlQ2FyZE1vZGFsLnJlbmRlclNhdmluZ1RleHQodHJ1ZSk7IC8vIFVwbG9hZCBwcm9jZXNzIHVuZGVyd2F5IVxyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5yZW1vdmVDYXJkKGNhcmRJZClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpOyAvLyBSZW1vdmUgY2FyZCBmb3IgdXNlclxyXG4gICAgICAgICAgICAgIGRlbGV0ZUNhcmRNb2RhbC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSkgLy8gTG9jYXRlIGVycm9yc1xyXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgZGVsZXRlQ2FyZE1vZGFsLnJlbmRlclNhdmluZ1RleHQoZmFsc2UpOyAvLyBSZXNldCBwcm9jZXNzXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICB0b2dnbGVDYXJkTGlrZTogKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRJZCA9IGNhcmQuZ2V0SWQoKTsgLy8gU2V0cyBpZCBvZiBjYXJkXHJcbiAgICAgICAgaWYgKGNhcmQuaXNMaWtlZCgpKSB7XHJcbiAgICAgICAgICAvLyBDYXJkIGxpa2VkIGJ5IG90aGVyczpcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAucmVtb3ZlQ2FyZExpa2UoY2FyZElkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgICAgICAgIC8vIElmIGNsaWNrZWQgd2hlbiBsaWtlZC4ucmVtb3ZlIGFjdGl2ZS1oZWFydFxyXG4gICAgICAgICAgICAgIC8vIFJldHVybnMgYXJyYXkgd2l0aCBhbGwgbGlrZXNcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgLmFkZENhcmRMaWtlKGNhcmRJZClcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlLFxyXG4gICAgdXNlcklkIC8vIHJlZmVyIHRvIHVzZXJcclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ2hhbmdlIEVkaXQtQnV0dG9uIEFQSSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4vLyBPYmplY3QgdmFsdWVzIGVxdWFsIGlucHV0LWZpZWxkIHZhbHVlcyBmcm9tIHBhc3QsIHN0XHJcbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcclxuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBqb2I7XHJcbn1cclxuXHJcbi8vIENoYW5nZSBlZGl0LW1vZGFsIGRhdGEgd2hlbiBzdWJtaXRcclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMuZWRpdE1vZGFsLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dCkgPT4ge1xyXG4gICAgLy8gRWRpdCBwcm9maWxlIGZpZWxkIHRvIHNlcnZlclxyXG4gICAgZWRpdFByb2ZpbGVNb2RhbC5yZW5kZXJTYXZpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmVkaXRVc2VySW5mbyhpbnB1dClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFByb2ZpbGVJbmZvKHtcclxuICAgICAgICAgIHByb2ZpbGVOYW1lOiBpbnB1dC50aXRsZSxcclxuICAgICAgICAgIHByb2ZpbGVKb2I6IGlucHV0LmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgLy8gQ2hhbmdlcyBpbnB1dCBmaWVsZCBcIm5hbWU9J3RpdGxlJ1wiIGRpc3BhbHllZCBvbiBtYWluIEhUTUxcclxuICAgICAgICB9KTtcclxuICAgICAgICBlZGl0UHJvZmlsZU1vZGFsLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVNb2RhbC5yZW5kZXJTYXZpbmcoZmFsc2UpOyAvLyBSZXNldCBwcm9jZXNzXHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gVXNlciBJbWFnZSBBUEkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNvbnN0IHByb2ZpbGVJbWFnZSA9IG5ldyBVc2VySW5mbyh7IHByb2ZpbGVJbWFnZTogc2VsZWN0b3JzLnByb2ZpbGVJbWFnZSB9KTtcclxuXHJcbmNvbnN0IGNoYW5nZVByb2ZpbGVJbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlSW1hZ2VNb2RhbCxcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXQpID0+IHtcclxuICAgIC8vIFVwZGF0ZSBwcm9maWxlLWltYWdlIHZpYSBzZXJ2ZXJcclxuICAgIGNoYW5nZVByb2ZpbGVJbWFnZU1vZGFsLnJlbmRlclNhdmluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAudXBkYXRlUHJvZmlsZVBpYyhpbnB1dClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHByb2ZpbGVJbWFnZS5zZXRQcm9maWxlSW1hZ2Uoe1xyXG4gICAgICAgICAgYXZhdGFyOiBpbnB1dC5saW5rLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNoYW5nZVByb2ZpbGVJbWFnZU1vZGFsLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgY2hhbmdlUHJvZmlsZUltYWdlTW9kYWwucmVuZGVyU2F2aW5nKGZhbHNlKTsgLy8gUmVzZXQgcHJvY2Vzc1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQWRkLUJ1dHRvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4vLyBVc2VzIGlucHV0cywgY3JlYXRlcyBjYXJkIGFuZCBhZGRzIHRvIGNhcmRTZWN0aW9uXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IG5ld0NhcmREYXRhID0gY3JlYXRlQ2FyZChkYXRhKTsgLy8gTWFrZXMgQ2FyZFxyXG4gIGNhcmRTZWN0aW9uLnByZXBlbmRJdGVtKG5ld0NhcmREYXRhKTsgLy8gQWRkcyBjYXJkIHRvIGJlZ2lubmluZ1xyXG59XHJcblxyXG4vLyBDaGFuZ2UgYWRkLW1vZGFsIGRhdGEgd2hlbiBzdWJtaXQsIHN0XHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMuYWRkTW9kYWwsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0KSA9PiB7XHJcbiAgICBhZGRDYXJkTW9kYWwucmVuZGVyU2F2aW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5hZGRDYXJkKGlucHV0KVxyXG4gICAgICAudGhlbigoYXJyYXlJbnB1dHMpID0+IHtcclxuICAgICAgICAvLyBBZGRzIGNhcmQgdG8gc2VydmVyISFcclxuICAgICAgICBjb25zdCBuZXdDYXJkRGF0YSA9IGFycmF5SW5wdXRzOyAvLyBuZXcgaW5wdXRzXHJcbiAgICAgICAgcmVuZGVyQ2FyZChuZXdDYXJkRGF0YSk7IC8vIFVzZXMgaW5wdXRzIGluIHByb2Nlc3Mgb2YgbWFraW5nIG5ldyBjYXJkXHJcbiAgICAgICAgYWRkQ2FyZE1vZGFsLmNsb3NlKCk7IC8vIEFsbG93cyB0byBjbG9zZVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGFkZENhcmRNb2RhbC5yZW5kZXJTYXZpbmcoZmFsc2UpOyAvLyBSZXNldCBwcm9jZXNzXHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBWYWxpZGF0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8vIFZhbGlkYXRlIGZvciBlZGl0IGJ1dHRvbiAodXNlZCBJRClcclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcHJvZmlsZUVkaXRGb3JtKTtcclxuLy8gVmFsaWRhdGUgZm9yIGFkZCBidXR0b25cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBjYXJkQWRkRm9ybSk7XHJcbi8vVmFsaWRhdGUgZm9yIGVkaXQtaWNvbiBvbiBwcm9maWxlIGltYWdlXHJcbmNvbnN0IGNoYW5nZUltYWdlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGNoYW5nZUltYWdlRm9ybSk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgIEluaXRpYXRlIGFsbCBpbnN0YW5jZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxudmlld0NhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpOyAvLyBDYXJkIG1vZGFsXHJcbmRlbGV0ZUNhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZWRpdFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpOyAvLyBFZGl0LWJ1dHRvbiBtb2RhbFxyXG5hZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gQWRkLWJ1dHRvbiBtb2RhbFxyXG5jaGFuZ2VQcm9maWxlSW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpOyAvLyBQcm9maWxlLWltYWdlIG1vZGFsXHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7IC8vIFZhbGlkYXRlcyBlZGl0IGZpZWxkcyBpbiBFZGl0LW1vZGFsXHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jaGFuZ2VJbWFnZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbCBvZiByZXN0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuLy8gV2hlbiB5b3UgY2xpY2sgZWRpdC1pY29uLi4uXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZmlsbFByb2ZpbGVGb3JtKCk7IC8vIFZhbHVlcyBlcXVhbCB0byBwYXN0IHZhbHVlc1xyXG4gIGVkaXRQcm9maWxlTW9kYWwub3BlbigpOyAvLyBPcGVuIG1vZGFsXHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IC8vIFJlc2V0IHZhbGlkYXRpb25cclxufSk7XHJcbi8vIENsaWNrIGFkZC1pY29uLi4uXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkTW9kYWwub3BlbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG4vL0NsaWNrIGVkaXQtaWNvbiBvbiBwcm9maWxlIGltYWdlLi4uXHJcbmNoYW5nZVByb2ZpbGVJbWFnZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNoYW5nZVByb2ZpbGVJbWFnZU1vZGFsLm9wZW4oKTtcclxuICBjaGFuZ2VJbWFnZVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBhdXRoVG9rZW4gfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9hdXRoVG9rZW4gPSBhdXRoVG9rZW47XHJcbiAgICB0aGlzLl9oZWFkZXJzID0ge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIF9wcm9jZXNzU2VydmVyUmVzcG9uc2UgPSAocmVzKSA9PiB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH07XHJcblxyXG4gIC8vIExvYWQgY2FyZHMgZnJvbSBzZXJ2ZXJcclxuICAvLyBSZWZlcnMgdG8gR0VUIChmZXRjaCBkZWZhdWx0KSBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHNcIlxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzU2VydmVyUmVzcG9uc2UpO1xyXG4gICAgLy8gLmNhdGNoKCkgaGFuZGxlZCBpbiBpbmRleC5qc1xyXG4gIH1cclxuICAvLyBMb2FkIHVzZXIgSW5mbyBmcm9tIHNlcnZlclxyXG4gIGxvYWRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gRWRpdHMgcHJvZmlsZSBkYXRhIG9uIHNlcnZlclxyXG4gIGVkaXRVc2VySW5mbyhpbnB1dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGlucHV0LnRpdGxlLFxyXG4gICAgICAgIGFib3V0OiBpbnB1dC5kZXNjcmlwdGlvbixcclxuICAgICAgfSksXHJcbiAgICAgIC8vIG5hbWUgYW5kIGFib3V0OiBhcmUgbmFtZWQgcHJvcGVydGllcyBmcm9tIHNlcnZlclxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gQWRkIGNhcmQgdG8gc2VydmVyXHJcbiAgYWRkQ2FyZChpbnB1dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogaW5wdXQudGl0bGUsIC8vIE5ldyBjYXJkIG5hbWVcclxuICAgICAgICBsaW5rOiBpbnB1dC5saW5rLCAvLyBOZXcgY2FyZCBpbWFnZVxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1NlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vIFJlbW92ZSBjYXJkIGZyb20gc2VydmVyXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1NlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vIFJlbW92ZSBsaWtlXHJcbiAgcmVtb3ZlQ2FyZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBBZGQgbGlrZVxyXG4gIGFkZENhcmRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUHJvZmlsZVBpYyhhdmF0YXIpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXIubGluaywgLy8gY2hhbmdlIGF2YXRhciBsaW5rXHJcbiAgICAgIH0pLFxyXG4gICAgICAvLyBuYW1lIGFuZCBhYm91dDogYXJlIG5hbWVkIHByb3BlcnRpZXMgZnJvbSBzZXJ2ZXJcclxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1NlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcbn1cclxuIiwiLy8gU2VjdGlvbiBjbGFzcyBpcyAncmVuZGVyQ2FyZCcgYXMgYW4gb2JqZWN0XHJcbmNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7IC8vIEFycmF5IG9mIGRhdGFcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IC8vIEZ1bmN0aW9uIGNyZWF0ZXMgYW5kIHJlbmRlcnMgZGF0YVxyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7IC8vIENsYXNzIHNlbGVjdG9yXHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKHRoaXMuX3JlbmRlcmVyKTtcclxuICAgIC8vIFJlbmRlcnMgZWFjaCBlbGVtZW50IG9uIGEgcGFnZVxyXG4gIH1cclxuICAvLyBBZGRzIGluaXRpYWwgY2FyZHMgaW4gb3JkZXJcclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICAvLyBUYWtlcyBhIERPTSBlbGVtZW50ICh2aWEgU2VsZWN0b3IpIGFuZCBhZGRzIGl0IHRvIHRoZSBjb250YWluZXJcclxuICB9XHJcbiAgLy8gUmV2ZXJzZSBuZXcgY2FyZHNcclxuICBwcmVwZW5kSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuLy8gSGlkZGVuIE1vZGFsIHdpbmRvd1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX21vZGFsSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9tb2RhbFRleHQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgLy8gQWRkIGFuIGltYWdlIHdpdGg6IGltZyAnc3JjJywgaW1nICdjYXB0aW9uJywgYW5kIHRleHRcclxuICAgIHRoaXMuX21vZGFsSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbW9kYWxJbWFnZS5hbHQgPSBgSW1hZ2UgJHtkYXRhLmxpbmt9YDtcclxuICAgIHRoaXMuX21vZGFsVGV4dC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIC8vIENhbGwgb24gbWV0aG9kIGZyb20gcGFyZW50IChQb3B1cClcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG4vLyBVZXNlZCBpbiBIaWRkZW4gRGVsZXRlIE1vZGFsIHdpbmRvd1xyXG4vLyBDYW4gYmUgdXNlZCBmb3IgYW55IGNvbmZpcm1hdGlvblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9kZWxldGVTdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2RlbGV0ZS1jYXJkLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fZGVsZXRlU3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX2RlbGV0ZVN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIHNldFN1Ym1pdChhY3Rpb24pIHtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdENhbGxiYWNrID0gYWN0aW9uO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRDYWxsYmFjaygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBVcGRhdGVzIHllcy1idXR0b24gdGV4dCB3aGVuIHNhdmluZ1xyXG4gIHJlbmRlclNhdmluZ1RleHQoaXNDb25maXJtaW5nKSB7XHJcbiAgICBpZiAoaXNDb25maXJtaW5nKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZVN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZVN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2RlbGV0ZVN1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBkYXRhLCB0b2dnbGVJbWFnZUNsaWNrLCB0b2dnbGVDYXJkRGVsZXRlLCB0b2dnbGVDYXJkTGlrZSB9LFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgdXNlcklkXHJcbiAgKSB7XHJcbiAgICAvLyBEYXRhIHBhc3NlZCBpbiByZW5kZXJDYXJkXHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7IC8vIFJlZmVycyBpZCBvZiBhIGNhcmQgKGRpZmZlcmVudCBlYWNoIHRpbWUpXHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7IC8vIFwiTGlrZXNcIiBvbiBhcnJheSBjYXJkXHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7IC8vIEFsbCBjYXJkcyBoYXZlIHVzZXJJZCBiYyBkaXNwbGF5ZWQgKG1lKVxyXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkOyAvLyBPd25lciBvZiBjYXJkc1xyXG4gICAgdGhpcy5fdG9nZ2xlSW1hZ2VDbGljayA9IHRvZ2dsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl90b2dnbGVDYXJkRGVsZXRlID0gdG9nZ2xlQ2FyZERlbGV0ZTtcclxuICAgIHRoaXMuX3RvZ2dsZUNhcmRMaWtlID0gdG9nZ2xlQ2FyZExpa2U7XHJcblxyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgLy8gUmV0dXJuIHRoZSBJZCBvZiBhIGNhcmRcclxuICBnZXRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvLyBQdWJsaWMgZnVuY3Rpb24sIGluaXRpYXRlcyBjYXJkIGVsZW1lbnRzXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgLy9SZXBsYWNlIGltYWdlIGFsdCBhbmQgc3JjICh0aGlzIGZyb20gbGluZSA3MSlcclxuICAgIHRoaXMuX2ltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICAvLyBSZXBsYWNlIHRpdGxlIHRleHRjb250ZW50XHJcbiAgICBjb25zdCB0aXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIC8vIFNldCBsaWtlIHRhbGx5XHJcbiAgICB0aGlzLl9jYXJkVGFsbHkgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtdGFsbHlcIik7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpOyAvLyBTaG93cyBjYXJkIGxpa2VzIGZyb20gc2VydmVyXHJcblxyXG4gICAgLy8gaWYgdGhlIG93bmVyIG9mIHRoZSBjYXJkIGlzbid0IG1lLi4uXHJcbiAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuX2NhcmREZWxldGVCdG4ucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgICAvLyBSZXR1cm4gJ3RoaXMnXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm5zIGxpa2VzIGZyb20gYXJyYXlzc3NcclxuICBpc0xpa2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGxpa2UpID0+IHRoaXMuX3VzZXJJZCA9PT0gbGlrZS5faWQpO1xyXG4gIH1cclxuICAvLyA9PT0gaWYgdHlwZXMgZGlmZmVyIGZhbHNlIGlzIHJldHVybmVkXHJcbiAgLy8gbGlrZS5faWQgPSByZXR1cm5zIEVWRVJZIHVzZXIgdGhhdCBsaWtlZFxyXG4gIC8vIHRoaXMuX3VzZXJJZCA9IG1lXHJcblxyXG4gIC8vIENoYW5nZSBsaWtlc1xyXG4gIHVwZGF0ZUxpa2VzKGxpa2VzKSB7XHJcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuICB9XHJcblxyXG4gIC8vIENoYW5nZXMgbGlrZSBidXR0b24gYXBwZWFyYW5jZVxyXG4gIF9yZW5kZXJMaWtlcygpIHtcclxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLl9jYXJkTGlrZUJ0bi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICAvLyBsaWtlZCBieSB1c2VyID0gYWN0aXZlXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jYXJkTGlrZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICAvLyBub3QtbGlrZWQgYnkgdXNlciA9IGluYWN0aXZlXHJcbiAgICB9XHJcbiAgICB0aGlzLl9jYXJkVGFsbHkudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7IC8vIGJ1dHRvbiB2YWx1ZVxyXG4gIH1cclxuXHJcbiAgLy8gUHVibGljLi4uXHJcbiAgZGVsZXRlQ2FyZCA9ICgpID0+IHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpOyAvLyByZW1vdmUgZm9yIHVzZXJcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDsgLy8gcmVtb3ZlIGxpbmsgZnJvbSBET00gZWxlbWVudCAmIGltcHJvdmUgZ2FyYmFnZSBjb2xsZWN0b3JcclxuICB9O1xyXG5cclxuICAvKiBIYW5kbGVycyBhcmUgY2FsbGVkIGFmdGVyIHRoZXkgZXhpc3QgKi9cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBXaGVuIGxpa2UtYnV0dG9uIGlzIGNsaWNrZWQuLi5cclxuICAgIHRoaXMuX2NhcmRMaWtlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl90b2dnbGVDYXJkTGlrZSgpKTsgLy8vLy9cclxuICAgIC8vIFdoZW4gZGVsZXRlLWJ1dHRvbiBpcyBjbGlja2VkLi4uIChyZW5kZXIgZGVsZXRlZCBjYXJkIGZvciB1c2VyIGFuZCBzZXJ2ZXIpXHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5fdG9nZ2xlQ2FyZERlbGV0ZSgpXHJcbiAgICApO1xyXG4gICAgLy8gV2hlbiBpbWFnZSBpcyBjbGlja2VkLi4uKG5hbWUgYW5kIGxpbmsgYXJlIHVzZWQpXHJcbiAgICB0aGlzLl9pbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJzZWxlY3RvcnMiLCJjYXJkQWRkRm9ybSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJjaGFuZ2VJbWFnZUZvcm0iLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJjaGFuZ2VQcm9maWxlSW1hZ2VCdXR0b24iLCJQb3B1cCIsImNvbnN0cnVjdG9yIiwicG9wdXBTZWxlY3RvciIsInRoaXMiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImV2dCIsImtleSIsImNsb3NlIiwib3BlbiIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsInVzZXJOYW1lIiwidXNlckpvYiIsInByb2ZpbGVJbWFnZSIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlSm9iIiwiX3Byb2ZpbGVJbWFnZSIsImdldFVzZXJJbmZvIiwibmFtZSIsInRleHRDb250ZW50Iiwiam9iIiwic2V0UHJvZmlsZUluZm8iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJzZXRQcm9maWxlSW1hZ2UiLCJhdmF0YXIiLCJzcmMiLCJhbHQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdEJ1dHRvbiIsIl9zdWJtaXRCdXR0b25UZXh0IiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwicmVuZGVyU2F2aW5nIiwiaXNTYXZpbmciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybSIsImVuYWJsZVZhbGlkYXRpb24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaW5wdXRFbGVtZW50cyIsImlucHV0RWxlbWVudCIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9lcnJvck1lc3NhZ2VFbCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwicmVzZXRWYWxpZGF0aW9uIiwiZXZlcnkiLCJkaXNhYmxlZCIsImFwaSIsImJhc2VVcmwiLCJhdXRoVG9rZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiX2Jhc2VVcmwiLCJfYXV0aFRva2VuIiwiX2hlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwidGhlbiIsIl9wcm9jZXNzU2VydmVyUmVzcG9uc2UiLCJsb2FkVXNlckluZm8iLCJlZGl0VXNlckluZm8iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRpdGxlIiwiYWJvdXQiLCJkZXNjcmlwdGlvbiIsImFkZENhcmQiLCJsaW5rIiwicmVtb3ZlQ2FyZCIsImNhcmRJZCIsInJlbW92ZUNhcmRMaWtlIiwiYWRkQ2FyZExpa2UiLCJ1cGRhdGVQcm9maWxlUGljIiwiY2FyZFNlY3Rpb24iLCJ1c2VySWQiLCJ1c2VySW5mbyIsIlVzZXJJbmZvIiwiYWxsIiwidXNlckRhdGEiLCJpbml0aWFsQ2FyZERhdGEiLCJfaWQiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImFkZEl0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZEl0ZW0iLCJwcmVwZW5kIiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY3JlYXRlQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInZpZXdDYXJkTW9kYWwiLCJfbW9kYWxJbWFnZSIsIl9tb2RhbFRleHQiLCJkZWxldGVDYXJkTW9kYWwiLCJfZGVsZXRlU3VibWl0QnV0dG9uIiwiX2RlbGV0ZVN1Ym1pdEJ1dHRvblRleHQiLCJzZXRTdWJtaXQiLCJhY3Rpb24iLCJfaGFuZGxlU3VibWl0Q2FsbGJhY2siLCJyZW5kZXJTYXZpbmdUZXh0IiwiaXNDb25maXJtaW5nIiwib2JqZWN0RGF0YSIsImNhcmQiLCJjYXJkU2VsZWN0b3IiLCJ0b2dnbGVJbWFnZUNsaWNrIiwidG9nZ2xlQ2FyZERlbGV0ZSIsInRvZ2dsZUNhcmRMaWtlIiwiX2NhcmRFbGVtZW50IiwiX25hbWUiLCJfbGluayIsIl9saWtlcyIsImxpa2VzIiwiX3VzZXJJZCIsIl9vd25lcklkIiwib3duZXIiLCJfdG9nZ2xlSW1hZ2VDbGljayIsIl90b2dnbGVDYXJkRGVsZXRlIiwiX3RvZ2dsZUNhcmRMaWtlIiwiX2NhcmRTZWxlY3RvciIsImdldElkIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJfaW1hZ2VFbCIsIl9jYXJkVGFsbHkiLCJfcmVuZGVyTGlrZXMiLCJfY2FyZERlbGV0ZUJ0biIsImlzTGlrZWQiLCJzb21lIiwibGlrZSIsInVwZGF0ZUxpa2VzIiwiX2NhcmRMaWtlQnRuIiwibGVuZ3RoIiwiaW1nRGF0YSIsImRlbGV0ZUNhcmQiLCJmaW5hbGx5IiwiZWRpdFByb2ZpbGVNb2RhbCIsImNoYW5nZVByb2ZpbGVJbWFnZU1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwiYXJyYXlJbnB1dHMiLCJuZXdDYXJkRGF0YSIsInJlbmRlckNhcmQiLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiY2hhbmdlSW1hZ2VWYWxpZGF0b3IiLCJmaWxsUHJvZmlsZUZvcm0iXSwic291cmNlUm9vdCI6IiJ9