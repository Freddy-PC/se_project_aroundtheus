!function(){"use strict";const e=[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},s=document.querySelector("#add-card-form"),i=document.querySelector("#edit-profile-form"),r=i.querySelector(".modal__input_type_name"),n=i.querySelector(".modal__input_type_descripion"),o=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button");function a(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__exit-button"))&&this.close()}))}}class c extends d{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super(t),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=s,this._inputList=this._popupForm.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){super.close(),this._popupForm.reset()}}var _=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this.checkInputValidity(e),this.toggleButtonState()}))}))}checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent="",this._errorMessageEl.classList.remove(this._errorClass)}toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}resetValidation(){this.toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}};const u=new class extends d{constructor(e){super(e),this._modalImage=this._popupElement.querySelector(".modal__image"),this._modalText=this._popupElement.querySelector(".modal__caption")}open(e){this._modalImage.src=e.link,this._modalImage.alt=`Image ${e.link}`,this._modalText.textContent=e.name,super.open()}}("#image-modal"),m=new class{constructor(e,t){let{items:s,renderer:i}=e;this._renderedItems=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._renderedItems.forEach(this._renderer)}addItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}}({items:e,renderer:e=>{const t=E(e);m.addItem(t)}},".cards__list"),h=new class{constructor(e){let{userName:t,userJob:s}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e){let{profileName:t,profileJob:s}=e;this._profileName.textContent=t,this._profileJob.textContent=s}}({userName:".profile__title",userJob:".profile__description"}),p=new c({popupSelector:"#edit-modal",handleFormSubmit:e=>{h.setUserInfo({profileName:e.title,profileJob:e.description}),p.close()}}),E=e=>new class{constructor(e,t){let{data:s,toggleImageClick:i}=e;a(this,"_toggleCardLike",(()=>{this._cardLikeBtn.classList.toggle("card__like-button_active")})),a(this,"_toggleCardDelete",(()=>{this._cardElement.remove()})),this._name=s.name,this._link=s.link,this._toggleImageClick=i,this._cardSelector=t}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._imageEl.src=this._link,this._imageEl.alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardElement}_setEventListeners(){this._cardLikeBtn=this._cardElement.querySelector(".card__like-button"),this._cardLikeBtn.addEventListener("click",(()=>this._toggleCardLike())),this._cardDeleteBtn=this._cardElement.querySelector(".card__delete-button"),this._cardDeleteBtn.addEventListener("click",(()=>this._toggleCardDelete())),this._imageEl=this._cardElement.querySelector(".card__image"),this._imageEl.addEventListener("click",(()=>this._toggleImageClick({name:this._name,link:this._link})))}}({data:e,toggleImageClick:e=>{u.open(e)}},"#card-template").getView(),g=new c({popupSelector:"#add-modal",handleFormSubmit:e=>{!function(e){const t=E(e);m.prependItem(t)}({name:e.title,link:e.link}),g.close()}}),b=new _(t,i),v=new _(t,s);m.renderItems(e),u.setEventListeners(),p.setEventListeners(),g.setEventListeners(),b.enableValidation(),v.enableValidation(),o.addEventListener("click",(()=>{!function(){const{name:e,job:t}=h.getUserInfo();r.value=e,n.value=t}(),p.open(),b.resetValidation()})),l.addEventListener("click",(()=>{g.open(),v.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YjZHLEVBQWlCN0QsaUJBQWlCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1zLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuLy8gRm9ybVZhbGlkYXRpb25cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4vLyBDYWxsaW5nIG5ldyBjbGFzc2VzXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgY2FyZExpc3Q6IFwiLmNhcmRzX19saXN0XCIsXHJcbiAgY2FyZFRlbXBsYXRlOiBcIi5jYXJkX190ZW1wbGF0ZVwiLFxyXG4gIHZpZXdNb2RhbDogXCIjaW1hZ2UtbW9kYWxcIiwgLy8gXCIuXCIgaW4gUG9wdXAuanNcclxuICB1c2VyTmFtZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICB1c2VySm9iOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIGFkZE1vZGFsOiBcIiNhZGQtbW9kYWxcIixcclxuICBlZGl0TW9kYWw6IFwiI2VkaXQtbW9kYWxcIixcclxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcclxufTtcclxuXHJcbi8qIElucHV0IGZpZWxkcyBpbiBFZGl0IGJ1dHRvbiAqL1xyXG5leHBvcnQgY29uc3QgY2FyZEFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1mb3JtXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gcHJvZmlsZUVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfbmFtZVwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IHByb2ZpbGVFZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX2Rlc2NyaXBpb25cIlxyXG4pO1xyXG5cclxuLy8gQnV0dG9uc1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAvLyB0aGlzLl9wb3B1cEVsZW1lbnQgPSBtb2RhbFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTsgLy8gKC5iaW5kKHRoaXMpKSBuZWVkZWQgdG8gbm90IGxvc2VlIGxvc2UgY29udGV4dCAndGhpcydcclxuICB9XHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgLyogQ2xvc2VzIHBvcHVwIHdoZW4gJ0VzYycga2V5IHByZXNzZWQgKi9cclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIC8vIE1ldGhvZCBjYWxsZWQgPSBhZGRpbmcgY2xhc3MgYW5kIGV2ZW50TGlzdGVuZXJcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIC8vIE1ldGhvZCBjYWxsZWQgPSByZW1vdmluZyBjbGFzcyBhbmQgZXZlbnRMaXN0ZW5lclxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAvL1doZW4gdGhlIEVzY2FwZSBrZXkgaXMgcHJlc3NlZCBjbG9zZU1vZGFsXHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLyogQ2xvc2UgTW9kYWwgd2hlbiB5b3UgY2xpY2s6IG9uIHNoYWRlZCBhcmVhIG9mIGZvcm1cclxuICAgICAgIG9yIGNsb3NlIGljb24gb2YgTW9kYWwgKi9cclxuICAgIC8vIE1vdXNlZG93biA9IE9ubHQgd2hlbiB5b3UgY2xpY2sgb24gYXJlYXMgdGhhdCBjYW4gY2xvc2VcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fZXhpdC1idXR0b25cIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG4vLyBTZWxlY3RzIGZpZWxkcyBpbiBwbHVzLWljb24gKGFkZC1CdXR0b24pXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm1zIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgLy8gaW5wdXRMaXN0IGFjY2Vzc2VzIGFsbCBpbnB1dCBmaWVsZHNcclxuICAgIC8qIGhhbmRsZUZvcm1TdWJtaXQgPSBjYWxsYmFjayB0aGF0IFBvcHVwV2l0aEZvcm0gXHJcbiAgICAgICAgICAgY2FsbHMgd2hlbiB0aGUgZm9ybXMgc3VibWl0IGV2ZW50IGZpcmVzICovXHJcbiAgfVxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICAgIC8qIENvbGxlY3RzIGRhdGEgZnJvbSBhbGwgdGhlIGlucHV0IGZpZWxkcyBcclxuICAgICAgIGFuZCByZXR1cm5zIHRoYXQgZGF0YSBhcyBhbiBvYmplY3QgKi9cclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgLy8gQ2FsbCBmdW5jdGlvbiBpbiBmdW5jdGlvblxyXG4gICAgfSk7XHJcbiAgICAvKiAgQWRkIHRoZSBzdWJtaXQgZXZlbnQgaGFuZGxlciB0byB0aGUgZm9ybSBcclxuICAgICAgICBhbmQgdGhlIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBjbG9zZSBpY29uKi9cclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICAvLyBSZXNldHMgdGhlIGZvcm0gb25jZSB0aGUgcG9wdXAgaXMgY2xvc2VkXHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgLy8gUHJpdmF0ZVxyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAvLyBHcmFicyBmb3JtRWxlbWVudFxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIC8vIENhbGwgb24gdGhlIG1ldGhvZCAoc2V0RXZlbnRMaXN0ZW5lcnMpIHdpdGhpbiB0aGUgY2xhc3NcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIC8vIENoZWNrIGZvciBzdWJtaXQsIGlucHV0IGZpZWxkcywgYW5kIChjb25zdHJ1Y3RvcilcclxuICAgICAgICAvKiBPdGhlciBwYXJhbWV0ZXJzIGFyZW4ndCBjYWxsZWQgYmMgXHJcbiAgICAgICAgICAgdGhleSBjYW4gYmUgcmVmZXJyZWQgdG8gYXMgJ3RoaXMnICovXHJcbiAgICAgICAgLy8gQm90aCBtZXRob2RzIGFyZSBwdWJsaWMgKGNhbiBiZSB1c2VkIGluIG90aGVyIGpzIGZpbGVzKVxyXG4gICAgICAgIHRoaXMuY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgLy8gUGFzcyBpbiBpbnB1dCBmaWVsZHMsIHNhdmUtYnV0dG9uLCBhbmQgY29uc3RydWN0b3JzXHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gUGFydCAxIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIC8vIGlmIGlucHV0IGVsZW1lbnQgaXMgbm90IHZhbGlkXHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIC8vIEVycm9yIG1lc3NhZ2UgcmVmZXJyZWQgdG8gYXMgJ3RoaXMnXHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTsgLy9kaWZmZXJcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFBhcnQgMiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENMZWFycyBlcnJvcnMgYW5kIGNvbnRyb2xscyBzdWJtaXQgYnV0dG9uXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIC8vIENoZWNrcyBhbGwgXCJtb2RhbF9faW5wdXRcIiBmb3IgdmFsaWRpdHlcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICAvKiBEb24ndCBuZWVkIHRvIGhhdmUgaW5wdXRFbGVtZW50IGluIHBhcmFtZXRlclxyXG4gICAgICAgYmVjYXVzZSBhbHJlYWR5IHJlZmVycmVkIHRvIGluIF9zZXRFdmVudExpc3RlbmVycz8gKi9cclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICAvLyBzdWJtaXRCdXR0b24gaXMgd2l0aGluIF9zZXRFdmVudExpc3RlbmVyc1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBDYWxsZWQgaW4gaW5kZXguanNcclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHNlbGVjdG9ycyxcclxuICBwcm9maWxlVGl0bGVJbnB1dCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcclxuICBlZGl0UHJvZmlsZUJ1dHRvbixcclxuICBhZGRDYXJkQnV0dG9uLFxyXG4gIHNldHRpbmdzLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybSxcclxuICBjYXJkQWRkRm9ybSxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybXMgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybXNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlIGluc3RhbmNlcyBvZiBjbGFzc2VzICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8vIEhpZGRlbiBJbWFnZSBNb2RhbCBXaW5kb3dcclxuY29uc3Qgdmlld0NhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMudmlld01vZGFsKTtcclxuXHJcbi8vIFJlbmRlciBDYXJkIHdpdGggU2VjdGlvbiwgc3RcclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChkYXRhKTsgLy8gTWFrZSBjYXJkIGFuZCBpbWFnZS1tb2RhbFxyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTsgLy8gQWRkIGluaXRpYWxDYXJkc1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHNlbGVjdG9ycy5jYXJkTGlzdFxyXG4pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFZGl0LUJ1dHRvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLy8gT2JqZWN0IHZhbHVlIGVxdWFscyBlZGl0IGlucHV0LWZpZWxkXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZTogc2VsZWN0b3JzLnVzZXJOYW1lLFxyXG4gIHVzZXJKb2I6IHNlbGVjdG9ycy51c2VySm9iLFxyXG59KTtcclxuXHJcbi8vIE1hbmFnZSBpbml0aWFsIHByb2ZpbGUgZGF0YSwgc3RcclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKCkge1xyXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGpvYjtcclxufVxyXG5cclxuLy8gQ2hhbmdlIGVkaXQtbW9kYWwgZGF0YSB3aGVuIHN1Ym1pdFxyXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm1zKHtcclxuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMuZWRpdE1vZGFsLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dCkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBwcm9maWxlTmFtZTogaW5wdXQudGl0bGUsXHJcbiAgICAgIHByb2ZpbGVKb2I6IGlucHV0LmRlc2NyaXB0aW9uLFxyXG4gICAgICAvLyBDaGFuZ2VzIGlucHV0IGZpZWxkIFwibmFtZT0ndGl0bGUnXCIgZGlzcGFseWVkIG9uIG1haW4gSFRNTFxyXG4gICAgfSk7XHJcbiAgICBlZGl0UHJvZmlsZU1vZGFsLmNsb3NlKCk7XHJcbiAgfSxcclxufSk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEFkZC1CdXR0b24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuLy8gVXNlcyBpbnB1dHMsIGNyZWF0ZXMgY2FyZCBhbmQgYWRkcyB0byBjYXJkU2VjdGlvblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcclxuICBjb25zdCBuZXdjYXJEYXRhID0gY3JlYXRlQ2FyZChkYXRhKTsgLy8gTWFrZXMgQ2FyZFxyXG4gIGNhcmRTZWN0aW9uLnByZXBlbmRJdGVtKG5ld2NhckRhdGEpOyAvLyBBZGRzIGNhcmQgdG8gYmVnaW5uaW5nXHJcbn1cclxuLy8gQ3JlYXRlcyBjYXJkIGFuZCBpbWFnZS1tb2RhbFxyXG5jb25zdCBjcmVhdGVDYXJkID0gKG9iamVjdERhdGEpID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIGRhdGE6IG9iamVjdERhdGEsXHJcbiAgICAgIHRvZ2dsZUltYWdlQ2xpY2s6IChpbWdEYXRhKSA9PiB7XHJcbiAgICAgICAgdmlld0NhcmRNb2RhbC5vcGVuKGltZ0RhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGVcclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufTtcclxuXHJcbi8vIENoYW5nZSBhZGQtbW9kYWwgZGF0YSB3aGVuIHN1Ym1pdCwgc3RcclxuY29uc3QgYWRkQ2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm1zKHtcclxuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMuYWRkTW9kYWwsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0KSA9PiB7XHJcbiAgICBjb25zdCBuZXdDYXJkRGF0YSA9IHsgbmFtZTogaW5wdXQudGl0bGUsIGxpbms6IGlucHV0LmxpbmsgfTsgLy8gbWFkZSBvZiBuZXcgaW5wdXRzXHJcbiAgICByZW5kZXJDYXJkKG5ld0NhcmREYXRhKTsgLy8gVXNlcyBpbnB1dHMgaW4gcHJvY2VzcyBvZiBtYWtpbmcgbmV3IGNhcmRcclxuICAgIGFkZENhcmRNb2RhbC5jbG9zZSgpOyAvLyBBbGxvd3MgdG8gY2xvc2VcclxuICB9LFxyXG59KTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gVmFsaWRhdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4vLyBWYWxpZGF0ZSBmb3IgZWRpdCBidXR0b24gKHVzZWQgSUQpXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbi8vIFZhbGlkYXRlIGZvciBhZGQgYnV0dG9uXHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgY2FyZEFkZEZvcm0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICBJbml0aWF0ZSBhbGwgaW5zdGFuY2VzICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKGluaXRpYWxDYXJkcyk7XHJcbnZpZXdDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gQ2FyZCBtb2RhbFxyXG5lZGl0UHJvZmlsZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vIEVkaXQtYnV0dG9uIG1vZGFsXHJcbmFkZENhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpOyAvLyBBZGQtYnV0dG9uIG1vZGFsXHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGwgb2YgcmVzdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8vIFdoZW4geW91IGNsaWNrIGVkaXQtaWNvbi4uLlxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGZpbGxQcm9maWxlRm9ybSgpOyAvLyBWYWx1ZXMgZXF1YWwgdG8gcGFzdCB2YWx1ZXNcclxuICBlZGl0UHJvZmlsZU1vZGFsLm9wZW4oKTsgLy8gT3BlbiBtb2RhbFxyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpOyAvLyBSZXNldCB2YWxpZGF0aW9uXHJcbn0pO1xyXG4vLyBDbGljayBhZGQtaWNvbi4uLlxyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZE1vZGFsLm9wZW4oKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG4vLyBIaWRkZW4gTW9kYWwgd2luZG93XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fbW9kYWxJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX21vZGFsVGV4dCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICAvLyBBZGQgYW4gaW1hZ2Ugd2l0aDogaW1nICdzcmMnLCBpbWcgJ2NhcHRpb24nLCBhbmQgdGV4dFxyXG4gICAgdGhpcy5fbW9kYWxJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlLmFsdCA9IGBJbWFnZSAke2RhdGEubGlua31gO1xyXG4gICAgdGhpcy5fbW9kYWxUZXh0LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgLy8gQ2FsbCBvbiBtZXRob2QgZnJvbSBwYXJlbnQgKFBvcHVwKVxyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCIvLyBTZWN0aW9uIGNsYXNzIGlzICdyZW5kZXJDYXJkJyBhcyBhbiBvYmplY3RcclxuY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtczsgLy8gQXJyYXkgb2YgZGF0YVxyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy8gRnVuY3Rpb24gY3JlYXRlcyBhbmQgcmVuZGVycyBkYXRhXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTsgLy8gQ2xhc3Mgc2VsZWN0b3JcclxuICB9XHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gICAgLy8gUmVuZGVycyBlYWNoIGVsZW1lbnQgb24gYSBwYWdlXHJcbiAgfVxyXG4gIC8vIEFkZHMgaW5pdGlhbCBjYXJkcyBpbiBvcmRlclxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgIC8vIFRha2VzIGEgRE9NIGVsZW1lbnQgKHZpYSBTZWxlY3RvcikgYW5kIGFkZHMgaXQgdG8gdGhlIGNvbnRhaW5lclxyXG4gIH1cclxuICAvLyBSZXZlcnNlIG5ldyBjYXJkc1xyXG4gIHByZXBlbmRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcclxuIiwiLy8gUmVuZGVycyBpbmZvIGZpZWxkcyBpbiBwcm9maWxlLWljb24gKEVkaXQtQnV0dG9uKVxyXG5jbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgdXNlckpvYiB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWUpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYik7XHJcbiAgICAvLyBHcmFicyBvYmplY3Qgb2YgdXNlciBpbmZvXHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgdGhlIHVzZXJcclxuICAgIC8vIEhhbmR5IHdoZW4gTkVDRVNTQVJZIHRvIGRpc3BsYXkgdGhlIHVzZXIgZGF0YSBpbiB0aGUgb3BlbiBmb3JtXHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKHsgcHJvZmlsZU5hbWUsIHByb2ZpbGVKb2IgfSkge1xyXG4gICAgLy8gVGFrZXMgbmV3IHVzZXIgZGF0YSBhbmQgYWRkcyBpdCBvbiB0aGUgcGFnZVxyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBwcm9maWxlTmFtZTtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBwcm9maWxlSm9iO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XHJcbiIsImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgdG9nZ2xlSW1hZ2VDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcclxuICAgIC8vIERhdGEgcGFzc2VkIGluIHJlbmRlckNhcmRcclxuICAgIC8vIEluIGNoYXJnZSBvZiBvbmx5ICdjYXJkJ1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90b2dnbGVJbWFnZUNsaWNrID0gdG9nZ2xlSW1hZ2VDbGljaztcclxuXHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgfVxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvLyBQdWJsaWMgZnVuY3Rpb24sIGluaXRpYXRlcyBjYXJkIGVsZW1lbnRzXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgLy9SZXBsYWNlIGltYWdlIGFsdCBhbmQgc3JjICh0aGlzIGZyb20gbGluZSA1OClcclxuICAgIHRoaXMuX2ltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICAvLyBSZXBsYWNlIHRpdGxlIHRleHRjb250ZW50XHJcbiAgICBjb25zdCB0aXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICAvLyBSZXR1cm4gJ3RoaXMnXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQ2FyZExpa2UgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH07XHJcblxyXG4gIF90b2dnbGVDYXJkRGVsZXRlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfTtcclxuXHJcbiAgLy8gSGFuZGxlcnMgYXJlIGNhbGxlZCBhZnRlciB0aGV5IGV4aXN0XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gV2hlbiBsaWtlLWJ1dHRvbiBpcyBjbGlja2VkLi4uXHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5fdG9nZ2xlQ2FyZExpa2UoKSk7XHJcbiAgICAvLyBXaGVuIGRlbGV0ZS1idXR0b24gaXMgY2xpY2tlZC4uLlxyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUNhcmREZWxldGUoKVxyXG4gICAgKTtcclxuICAgIC8vIFdoZW4gaW1hZ2UgaXMgY2xpY2tlZC4uLm5hbWUgYW5kIGxpbmsgYXJlIHVzZWQhXHJcbiAgICB0aGlzLl9pbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIl0sIm5hbWVzIjpbImluaXRpYWxDYXJkcyIsIm5hbWUiLCJsaW5rIiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImNhcmRBZGRGb3JtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUVkaXRGb3JtIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsIlBvcHVwIiwiY29uc3RydWN0b3IiLCJwb3B1cFNlbGVjdG9yIiwidGhpcyIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJvcGVuIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybXMiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1WYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybSIsImVuYWJsZVZhbGlkYXRpb24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaW5wdXRFbGVtZW50cyIsIl9zdWJtaXRCdXR0b24iLCJpbnB1dEVsZW1lbnQiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfZXJyb3JNZXNzYWdlRWwiLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwicmVzZXRWYWxpZGF0aW9uIiwiZXZlcnkiLCJkaXNhYmxlZCIsInZpZXdDYXJkTW9kYWwiLCJfbW9kYWxJbWFnZSIsIl9tb2RhbFRleHQiLCJkYXRhIiwic3JjIiwiYWx0IiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImFkZEl0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZEl0ZW0iLCJwcmVwZW5kIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwidXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJlZGl0UHJvZmlsZU1vZGFsIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIm9iamVjdERhdGEiLCJjYXJkU2VsZWN0b3IiLCJ0b2dnbGVJbWFnZUNsaWNrIiwiX2NhcmRMaWtlQnRuIiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwiX25hbWUiLCJfbGluayIsIl90b2dnbGVJbWFnZUNsaWNrIiwiX2NhcmRTZWxlY3RvciIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiX2ltYWdlRWwiLCJfdG9nZ2xlQ2FyZExpa2UiLCJfY2FyZERlbGV0ZUJ0biIsIl90b2dnbGVDYXJkRGVsZXRlIiwiaW1nRGF0YSIsImFkZENhcmRNb2RhbCIsIm5ld2NhckRhdGEiLCJyZW5kZXJDYXJkIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImZpbGxQcm9maWxlRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=